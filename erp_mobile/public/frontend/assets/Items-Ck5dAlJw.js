var W=Object.defineProperty;var G=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var P=(i,a,r)=>a in i?W(i,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[a]=r,I=(i,a)=>{for(var r in a||(a={}))X.call(a,r)&&P(i,r,a[r]);if(G)for(var r of G(a))Y.call(a,r)&&P(i,r,a[r]);return i};import{r as m,m as p,e as S,o as Z,f as u,g as e,p as D,k as M,G as f,u as C,I as c,J as b,F as x,q as w,j as g,x as j,K as U,z as ee,l as n,B as te,D as oe}from"./index-Vv3bt0ip.js";import{P as se}from"./plus-BZ_sYe8M.js";import{T as le}from"./trash-BSO93ctN.js";const ae={class:"container mx-auto px-4 py-8 pb-20"},re={class:"flex flex-col space-y-4 mb-6"},ne={class:"flex justify-between items-center"},ue={class:"flex items-center"},ie={class:"space-y-4"},de={class:"flex items-center p-4"},me={key:0,class:"w-16 h-16 flex-shrink-0"},ce=["src","alt"],ge={class:"ml-4 flex-grow"},pe={class:"text-lg font-semibold text-gray-900"},fe={class:"text-sm text-gray-500"},be={class:"text-sm text-gray-500"},ve={class:"flex items-center space-x-2"},_e=["onClick"],ye={class:"flex justify-between items-center mt-6"},xe=["disabled"],we=["disabled"],he={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50"},ke={class:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full m-4"},Ie={class:"mb-4"},Se={class:"mb-4"},Ce=["value"],Ue={class:"mb-4"},Ae={class:"mb-4"},Ne=["value"],Ve={class:"mb-4"},Ge=["value"],Pe={class:"mb-4"},De={class:"mb-4"},A=20,Le={__name:"Items",setup(i){const a=m([]),r=m([]),N=m([]),l=m({item_code:"",item_name:"",item_group:"All Item Groups",stock_uom:"",description:"",image:null,image_url:"",gst_hsn_code:""}),v=m(!1),q=m([]),d=m(1),_=m(""),h=p({url:"frappe.client.get_list",params:{doctype:"Item",fields:["name","item_code","item_name","item_group","image"],limit_page_length:0},auto:!0,onSuccess(s){a.value=s}}),O=p({url:"frappe.client.get_list",params:{doctype:"Item Group",fields:["name","item_group_name"]},auto:!0,onSuccess(s){r.value=s}}),B=p({url:"frappe.client.get_list",params:{doctype:"UOM",fields:["name","uom_name"]},auto:!0,onSuccess(s){N.value=s}}),L=p({url:"frappe.client.get_list",params:{doctype:"GST HSN Code",fields:["name","hsn_code","description"]},auto:!0,onSuccess(s){q.value=s}}),R=p({url:"frappe.client.insert",onSuccess(){l.value={item_code:"",item_name:"",item_group:"All Item Groups",stock_uom:"",description:"",image:null,image_url:"",gst_hsn_code:""},v.value=!1,h.reload()}}),T=p({url:"frappe.client.delete",onSuccess(){h.reload()}}),V=S(()=>{if(!_.value)return a.value;const s=_.value.toLowerCase();return a.value.filter(t=>t.item_name.toLowerCase().includes(s))}),k=S(()=>Math.ceil(V.value.length/A)),H=S(()=>{const s=(d.value-1)*A,t=s+A;return V.value.slice(s,t)});function F(){d.value<k.value&&d.value++}function z(){d.value>1&&d.value--}function Q(){v.value=!0}function $(){v.value=!1}function E(s){const t=s.target.files[0];if(t){const y=new FileReader;y.onload=o=>{l.value.image=o.target.result},y.readAsDataURL(t)}}function J(){const s=I({},l.value);s.image_url&&s.image_url.trim()!==""&&(s.image=s.image_url),delete s.image_url,R.submit({doc:I({doctype:"Item"},s)})}function K(s){confirm("Are you sure you want to delete this item?")&&T.submit({doctype:"Item",name:s})}return Z(()=>{h.reload(),O.reload(),B.reload()}),(s,t)=>{const y=ee("router-link");return n(),u("div",ae,[e("div",re,[e("div",ne,[t[9]||(t[9]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Items",-1)),e("button",{onClick:Q,class:"bg-blue-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg inline-flex items-center"},[M(C(se),{class:"w-4 h-4 mr-2"}),t[8]||(t[8]=f(" Add Item "))])]),e("div",ue,[c(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>_.value=o),placeholder:"Search by item name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[b,_.value]])])]),e("div",ie,[(n(!0),u(x,null,w(H.value,o=>(n(),te(y,{key:o.name,to:`/item/${o.name}`,class:"block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow"},{default:oe(()=>[e("div",de,[o.image?(n(),u("div",me,[e("img",{src:o.image,alt:o.item_name,class:"w-full h-full object-cover rounded-lg"},null,8,ce)])):D("",!0),e("div",ge,[e("h2",pe,g(o.item_name),1),e("p",fe,"Code: "+g(o.item_code),1),e("p",be,"Group: "+g(o.item_group),1)]),e("div",ve,[e("button",{onClick:j(Me=>K(o.name),["prevent"]),class:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50"},[M(C(le),{class:"w-5 h-5"})],8,_e)])])]),_:2},1032,["to"]))),128))]),e("div",ye,[e("button",{onClick:z,disabled:d.value===1,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Previous ",8,xe),e("span",null,"Page "+g(d.value)+" of "+g(k.value),1),e("button",{onClick:F,disabled:d.value===k.value,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Next ",8,we)]),v.value?(n(),u("div",he,[e("div",ke,[t[22]||(t[22]=e("h2",{class:"text-2xl font-bold mb-4"},"Add New Item",-1)),e("form",{onSubmit:j(J,["prevent"])},[e("div",Ie,[t[10]||(t[10]=e("label",{for:"item_code",class:"block text-sm font-medium text-gray-700"},[f("Item Code "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{type:"text",id:"item_code","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.item_code=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[b,l.value.item_code]])]),e("div",Se,[t[12]||(t[12]=e("label",{for:"gst_hsn_code",class:"block text-sm font-medium text-gray-700"},[f(" HSN/SAC Code "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{id:"gst_hsn_code","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.gst_hsn_code=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[11]||(t[11]=e("option",{value:""},"Select HSN/SAC Code",-1)),(n(!0),u(x,null,w(C(L).data,o=>(n(),u("option",{key:o.name,value:o.name},g(o.hsn_code),9,Ce))),128))],512),[[U,l.value.gst_hsn_code]])]),e("div",Ue,[t[13]||(t[13]=e("label",{for:"item_name",class:"block text-sm font-medium text-gray-700"},[f("Item Name "),e("span",{class:"text-red-500"},"*")],-1)),c(e("input",{type:"text",id:"item_name","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.item_name=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[b,l.value.item_name]])]),e("div",Ae,[t[15]||(t[15]=e("label",{for:"item_group",class:"block text-sm font-medium text-gray-700"},[f("Item Group "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{id:"item_group","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.item_group=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[14]||(t[14]=e("option",{value:"All Item Groups"},"All Item Groups",-1)),(n(!0),u(x,null,w(r.value,o=>(n(),u("option",{key:o.name,value:o.name},g(o.item_group_name),9,Ne))),128))],512),[[U,l.value.item_group]])]),e("div",Ve,[t[18]||(t[18]=e("label",{for:"stock_uom",class:"block text-sm font-medium text-gray-700"},[f("UOM "),e("span",{class:"text-red-500"},"*")],-1)),c(e("select",{id:"stock_uom","onUpdate:modelValue":t[5]||(t[5]=o=>l.value.stock_uom=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[16]||(t[16]=e("option",{value:""},"Select UOM",-1)),t[17]||(t[17]=e("option",{value:"Nos"},"Nos",-1)),(n(!0),u(x,null,w(N.value,o=>(n(),u("option",{key:o.name,value:o.name},g(o.uom_name),9,Ge))),128))],512),[[U,l.value.stock_uom]])]),e("div",Pe,[t[19]||(t[19]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),c(e("textarea",{id:"description","onUpdate:modelValue":t[6]||(t[6]=o=>l.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[b,l.value.description]])]),e("div",De,[t[20]||(t[20]=e("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("input",{type:"file",id:"image",onChange:E,accept:"image/*",class:"mt-1 block w-full"},null,32),c(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>l.value.image_url=o),placeholder:"Or enter image URL",class:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[b,l.value.image_url]])]),e("div",{class:"flex justify-end space-x-2 mt-6"},[e("button",{type:"button",onClick:$,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),t[21]||(t[21]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-indigo-700"}," Add Item ",-1))])],32)])])):D("",!0)])}}};export{Le as default};
