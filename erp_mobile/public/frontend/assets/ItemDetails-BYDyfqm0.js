var T=Object.defineProperty;var U=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var D=(c,i,l)=>i in c?T(c,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):c[i]=l,k=(c,i)=>{for(var l in i||(i={}))H.call(i,l)&&D(c,l,i[l]);if(U)for(var l of U(i))P.call(i,l)&&D(c,l,i[l]);return c};var M=(c,i,l)=>new Promise((o,g)=>{var a=d=>{try{p(l.next(d))}catch(v){g(v)}},h=d=>{try{p(l.throw(d))}catch(v){g(v)}},p=d=>d.done?o(d.value):Promise.resolve(d.value).then(a,h);p((l=l.apply(c,i)).next())});import{c as F,r as f,m as y,L as z,y as A,o as J,f as u,g as e,k as I,u as _,j as r,p as N,x as K,I as x,J as C,K as L,F as V,q,l as m}from"./index-Vv3bt0ip.js";import{T as Q}from"./trash-BSO93ctN.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=F("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=F("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Y={class:"bg-gray-100 min-h-screen"},Z={class:"max-w-7xl mx-auto p-4"},ee={key:0,class:"bg-white rounded-lg shadow-lg overflow-hidden"},te={class:"relative bg-indigo-600 text-white p-4"},se={class:"text-2xl font-bold text-center"},oe={class:"absolute top-4 right-4 flex space-x-2"},ae={class:"md:flex"},le={key:0,class:"md:w-1/2 relative aspect-w-16 aspect-h-9 md:aspect-none md:h-[400px]"},ne=["src","alt"],ie={class:"md:w-1/2 p-6 space-y-6"},de={key:0},re={class:"text-2xl font-semibold mb-2"},ue={class:"text-gray-600"},me={class:"mt-4"},ce={class:"text-gray-600"},ge={class:"mt-4"},pe={class:"text-gray-600"},ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6"},fe={class:"bg-gray-50 p-4 rounded-lg"},be={class:"font-medium"},ye={class:"bg-gray-50 p-4 rounded-lg"},_e={class:"font-medium"},xe={class:"bg-gray-50 p-4 rounded-lg"},he={class:"font-medium"},we={class:"bg-gray-50 p-4 rounded-lg"},ke={class:"font-medium"},Ie={class:"mt-6 text-sm text-gray-500"},Ce=["value"],Se=["value"],Ue={class:"mt-1 flex items-center space-x-4"},De={key:0},Me={class:"flex justify-end space-x-2"},Ne=["disabled"],Le={key:1,class:"flex justify-center items-center h-64"},Oe={__name:"ItemDetails",setup(c){const i=z(),l=A(),o=f(null),g=f(!1),a=f({}),h=f([]),p=f([]),d=f(null),v=y({url:"frappe.client.get",params:{doctype:"Item",name:i.params.id,fields:["name","item_code","item_name","item_group","stock_uom","description","image","gst_hsn_code"]},onSuccess(n){o.value=n,a.value=k({},n)}}),O=y({url:"frappe.client.get_list",params:{doctype:"Item Group",fields:["name","item_group_name"]},auto:!0,onSuccess(n){h.value=n}}),R=y({url:"frappe.client.get_list",params:{doctype:"UOM",fields:["name","uom_name"]},auto:!0,onSuccess(n){p.value=n}}),w=y({url:"frappe.client.set_value",onSuccess(){g.value=!1,v.reload()}});function S(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function j(n){const t=n.target.files[0];if(t){d.value=t;const s=new FileReader;s.onload=b=>{a.value.image=b.target.result},s.readAsDataURL(t)}}function G(){return M(this,null,function*(){let n=a.value.image;if(d.value){const t=new FormData;t.append("file",d.value),t.append("doctype","Item"),t.append("docname",o.value.name),t.append("fieldname","image");try{const b=yield(yield fetch("/api/method/upload_file",{method:"POST",body:t})).json();b.message&&b.message.file_url&&(n=b.message.file_url)}catch(s){console.error("Error uploading image:",s)}}w.submit({doctype:"Item",name:o.value.name,fieldname:{item_name:a.value.item_name,description:a.value.description,item_group:a.value.item_group,stock_uom:a.value.stock_uom,image:n,gst_hsn_code:a.value.gst_hsn_code}})})}function $(){g.value=!1,a.value=k({},o.value),d.value=null}function B(){confirm("Are you sure you want to delete this item?")&&E.submit({doctype:"Item",name:o.value.name})}const E=y({url:"frappe.client.delete",onSuccess(){l.push("/items")}});return J(()=>{v.submit(),O.submit(),R.submit()}),(n,t)=>(m(),u("div",Y,[e("div",Z,[o.value?(m(),u("div",ee,[e("div",te,[e("button",{onClick:t[0]||(t[0]=s=>n.$router.back()),class:"absolute top-4 left-4 bg-white rounded-full p-2 shadow-lg z-10"},[I(_(W),{class:"h-6 w-6 text-gray-600"})]),e("h1",se,r(o.value.item_name),1),e("div",oe,[e("button",{onClick:t[1]||(t[1]=s=>g.value=!0),class:"bg-green-500 text-white rounded-full p-2 hover:bg-green-600 transition-colors"},[I(_(X),{class:"h-5 w-5"})]),e("button",{onClick:B,class:"bg-red-500 text-white rounded-full p-2 hover:bg-red-600 transition-colors"},[I(_(Q),{class:"h-5 w-5"})])])]),e("div",ae,[o.value.image?(m(),u("div",le,[e("img",{src:o.value.image,alt:o.value.item_name,class:"w-full h-full object-contain",style:{"max-height":"400px"}},null,8,ne)])):N("",!0),e("div",ie,[g.value?(m(),u("form",{key:1,onSubmit:K(G,["prevent"]),class:"space-y-6"},[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Name",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.item_name=s),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,a.value.item_name]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,a.value.description]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Group",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.item_group=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(m(!0),u(V,null,q(h.value,s=>(m(),u("option",{key:s.name,value:s.name},r(s.item_group_name),9,Ce))),128))],512),[[L,a.value.item_group]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"UOM",-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.stock_uom=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[17]||(t[17]=e("option",{value:"Nos"},"Nos",-1)),(m(!0),u(V,null,q(p.value,s=>(m(),u("option",{key:s.name,value:s.name},r(s.uom_name),9,Se))),128))],512),[[L,a.value.stock_uom]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("div",Ue,[e("input",{type:"file",accept:"image/*",onChange:j,class:"hidden",ref:"fileInput"},null,544),e("button",{type:"button",onClick:t[6]||(t[6]=s=>n.$refs.fileInput.click()),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Choose File "),d.value?(m(),u("span",De,r(d.value.name),1)):N("",!0)]),t[20]||(t[20]=e("p",{class:"mt-2 text-sm text-gray-500"},"Or enter image URL:",-1)),x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.image=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,a.value.image]])]),e("div",Me,[e("button",{type:"button",onClick:$,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-indigo-700",disabled:_(w).loading},r(_(w).loading?"Saving...":"Save Changes"),9,Ne)])],32)):(m(),u("div",de,[e("div",null,[e("h2",re,r(o.value.item_name),1),e("p",ue,"Code: "+r(o.value.item_code),1)]),e("div",me,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold mb-2"},"Description",-1)),e("p",ce,r(o.value.description||"No description available."),1)]),e("div",ge,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold mb-2"},"HSN Code",-1)),e("p",pe,r(o.value.gst_hsn_code||"No HSN code available."),1)]),e("div",ve,[e("div",fe,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-500"},"Item Group",-1)),e("p",be,r(o.value.item_group),1)]),e("div",ye,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-500"},"UOM",-1)),e("p",_e,r(o.value.stock_uom),1)]),e("div",xe,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"},"Created By",-1)),e("p",he,r(o.value.owner),1)]),e("div",we,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-500"},"Last Modified",-1)),e("p",ke,r(S(o.value.modified)),1)])]),e("div",Ie,[e("p",null,"Created: "+r(S(o.value.creation)),1)])]))])])])):(m(),u("div",Le,t[21]||(t[21]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"},null,-1)])))])]))}};export{Oe as default};
