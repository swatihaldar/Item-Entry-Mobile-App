var G=Object.defineProperty;var D=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var U=(u,i,l)=>i in u?G(u,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[i]=l,k=(u,i)=>{for(var l in i||(i={}))O.call(i,l)&&U(u,l,i[l]);if(D)for(var l of D(i))$.call(i,l)&&U(u,l,i[l]);return u};var M=(u,i,l)=>new Promise((a,p)=>{var o=d=>{try{g(l.next(d))}catch(v){p(v)}},h=d=>{try{g(l.throw(d))}catch(v){p(v)}},g=d=>d.done?a(d.value):Promise.resolve(d.value).then(o,h);g((l=l.apply(u,i)).next())});import{c as B,r as f,m as y,I as T,J as A,o as P,f as m,g as e,k as I,u as _,j as r,A as z,E as x,G as C,H as V,F as L,p as N,D as H,l as c}from"./index-wG4MnxLv.js";import{C as J,T as K}from"./trash-BOOKFwlR.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=B("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),W={class:"bg-gray-100 min-h-screen"},X={class:"max-w-7xl mx-auto p-4"},Y={key:0,class:"bg-white rounded-lg shadow-lg overflow-hidden"},Z={class:"relative bg-indigo-600 text-white p-4"},ee={class:"text-2xl font-bold text-center"},te={class:"absolute top-4 right-4 flex space-x-2"},se={class:"md:flex"},oe={class:"md:w-1/2 relative aspect-w-16 aspect-h-9 md:aspect-none md:h-[600px]"},ae=["src","alt"],le={class:"md:w-1/2 p-6 space-y-6"},ne={key:0},ie={class:"text-2xl font-semibold mb-2"},de={class:"text-gray-600"},re={class:"mt-4"},ue={class:"text-gray-600"},me={class:"grid grid-cols-2 gap-4 mt-6"},ce={class:"bg-gray-50 p-4 rounded-lg"},pe={class:"font-medium"},ge={class:"bg-gray-50 p-4 rounded-lg"},ve={class:"font-medium"},fe={class:"bg-gray-50 p-4 rounded-lg"},be={class:"font-medium"},ye={class:"bg-gray-50 p-4 rounded-lg"},_e={class:"font-medium"},xe={class:"mt-6 text-sm text-gray-500"},he=["value"],we=["value"],ke={class:"mt-1 flex items-center space-x-4"},Ie={key:0},Ce={class:"flex justify-end space-x-2"},Se=["disabled"],De={key:1,class:"flex justify-center items-center h-64"},Le={__name:"ItemDetails",setup(u){const i=T(),l=A(),a=f(null),p=f(!1),o=f({}),h=f([]),g=f([]),d=f(null),v=y({url:"frappe.client.get",params:{doctype:"Item",name:i.params.id},onSuccess(n){a.value=n,o.value=k({},n)}});y({url:"frappe.client.get_list",params:{doctype:"Item Group",fields:["name","item_group_name"]},auto:!0,onSuccess(n){h.value=n}}),y({url:"frappe.client.get_list",params:{doctype:"UOM",fields:["name","uom_name"]},auto:!0,onSuccess(n){g.value=n}});const w=y({url:"frappe.client.set_value",onSuccess(){p.value=!1,v.submit()}});function S(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function F(n){const t=n.target.files[0];if(t){d.value=t;const s=new FileReader;s.onload=b=>{o.value.image=b.target.result},s.readAsDataURL(t)}}function R(){return M(this,null,function*(){let n=o.value.image;if(d.value){const t=new FormData;t.append("file",d.value),t.append("doctype","Item"),t.append("docname",a.value.name),t.append("fieldname","image");try{const b=yield(yield fetch("/api/method/upload_file",{method:"POST",body:t})).json();b.message&&b.message.file_url&&(n=b.message.file_url)}catch(s){console.error("Error uploading image:",s)}}w.submit({doctype:"Item",name:a.value.name,fieldname:{item_name:o.value.item_name,description:o.value.description,item_group:o.value.item_group,stock_uom:o.value.stock_uom,image:n}})})}function j(){p.value=!1,o.value=k({},a.value),d.value=null}function q(){confirm("Are you sure you want to delete this item?")&&E.submit({doctype:"Item",name:a.value.name})}const E=y({url:"frappe.client.delete",onSuccess(){l.push("/items")}});return P(()=>{v.submit()}),(n,t)=>(c(),m("div",W,[e("div",X,[a.value?(c(),m("div",Y,[e("div",Z,[e("button",{onClick:t[0]||(t[0]=s=>n.$router.back()),class:"absolute top-4 left-4 bg-white rounded-full p-2 shadow-lg z-10"},[I(_(J),{class:"h-6 w-6 text-gray-600"})]),e("h1",ee,r(a.value.item_name),1),e("div",te,[e("button",{onClick:t[1]||(t[1]=s=>p.value=!0),class:"bg-green-500 text-white rounded-full p-2 hover:bg-green-600 transition-colors"},[I(_(Q),{class:"h-5 w-5"})]),e("button",{onClick:q,class:"bg-red-500 text-white rounded-full p-2 hover:bg-red-600 transition-colors"},[I(_(K),{class:"h-5 w-5"})])])]),e("div",se,[e("div",oe,[e("img",{src:a.value.image||"/placeholder.svg?height=600&width=600",alt:a.value.item_name,class:"w-full h-full object-cover"},null,8,ae)]),e("div",le,[p.value?(c(),m("form",{key:1,onSubmit:z(R,["prevent"]),class:"space-y-6"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Name",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.item_name=s),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,o.value.item_name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.description=s),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,o.value.description]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Group",-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.item_group=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(c(!0),m(L,null,N(h.value,s=>(c(),m("option",{key:s.name,value:s.name},r(s.item_group_name),9,he))),128))],512),[[V,o.value.item_group]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"UOM",-1)),x(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.stock_uom=s),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[16]||(t[16]=e("option",{value:"Nos"},"Nos",-1)),(c(!0),m(L,null,N(g.value,s=>(c(),m("option",{key:s.name,value:s.name},r(s.uom_name),9,we))),128))],512),[[V,o.value.stock_uom]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("div",ke,[e("input",{type:"file",accept:"image/*",onChange:F,class:"hidden",ref:"fileInput"},null,544),e("button",{type:"button",onClick:t[6]||(t[6]=s=>n.$refs.fileInput.click()),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Choose File "),d.value?(c(),m("span",Ie,r(d.value.name),1)):H("",!0)]),t[19]||(t[19]=e("p",{class:"mt-2 text-sm text-gray-500"},"Or enter image URL:",-1)),x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.image=s),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[C,o.value.image]])]),e("div",Ce,[e("button",{type:"button",onClick:j,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-indigo-700",disabled:_(w).loading},r(_(w).loading?"Saving...":"Save Changes"),9,Se)])],32)):(c(),m("div",ne,[e("div",null,[e("h2",ie,r(a.value.item_name),1),e("p",de,"Code: "+r(a.value.item_code),1)]),e("div",re,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold mb-2"},"Description",-1)),e("p",ue,r(a.value.description||"No description available."),1)]),e("div",me,[e("div",ce,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-500"},"Item Group",-1)),e("p",pe,r(a.value.item_group),1)]),e("div",ge,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-500"},"UOM",-1)),e("p",ve,r(a.value.stock_uom),1)]),e("div",fe,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-500"},"Created By",-1)),e("p",be,r(a.value.owner),1)]),e("div",ye,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"},"Last Modified",-1)),e("p",_e,r(S(a.value.modified)),1)])]),e("div",xe,[e("p",null,"Created: "+r(S(a.value.creation)),1)])]))])])])):(c(),m("div",De,t[20]||(t[20]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"},null,-1)])))])]))}};export{Le as default};
