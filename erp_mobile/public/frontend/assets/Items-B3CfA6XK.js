var q=Object.defineProperty;var k=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var h=(r,a,i)=>a in r?q(r,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[a]=i,_=(r,a)=>{for(var i in a||(a={}))R.call(a,i)&&h(r,i,a[i]);if(k)for(var i of k(a))T.call(a,i)&&h(r,i,a[i]);return r};import{r as c,l as p,m as B,a as n,b as e,n as F,d as I,k as L,u as U,F as v,f as y,j as P,p as m,v as g,q as N,o as u,t as d}from"./index-DJncSlks.js";import{P as E,T as $}from"./trash-BK2Pbz7o.js";const z={class:"container mx-auto px-4 py-8"},H={class:"flex justify-between items-center mb-6"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},K={class:"p-4"},Q={class:"text-xl font-semibold text-gray-800"},W={class:"text-sm text-gray-600"},X={class:"relative"},Y=["src","alt"],Z=["onClick"],ee={class:"p-4"},te={class:"text-sm text-gray-600"},oe={class:"mt-4 flex justify-between text-sm text-gray-500"},se={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center"},le={class:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full"},ae={class:"mb-4"},ie={class:"mb-4"},re={class:"mb-4"},ne=["value"],ue={class:"mb-4"},de=["value"],me={class:"mb-4"},ce={class:"mb-4"},be={__name:"Items",setup(r){const a=c([]),i=c([]),x=c([]),l=c({item_code:"",item_name:"",item_group:"",stock_uom:"Nos",description:"",image:null,image_url:""}),f=c(!1),b=p({url:"frappe.client.get_list",params:{doctype:"Item",fields:["name","item_code","item_name","item_group","stock_uom","description","image"]},auto:!0,onSuccess(s){a.value=s}}),V=p({url:"frappe.client.get_list",params:{doctype:"Item Group",fields:["name","item_group_name"]},auto:!0,onSuccess(s){i.value=s}}),C=p({url:"frappe.client.get_list",params:{doctype:"UOM",fields:["name","uom_name"]},auto:!0,onSuccess(s){x.value=s}}),S=p({url:"frappe.client.insert",onSuccess(){l.value={item_code:"",item_name:"",item_group:"",stock_uom:"Nos",description:"",image:null,image_url:""},f.value=!1,b.reload()}}),A=p({url:"frappe.client.delete",onSuccess(){b.reload()}});function D(){f.value=!0}function M(){f.value=!1}function j(s){const t=s.target.files[0];if(t){const o=new FileReader;o.onload=w=>{l.value.image=w.target.result},o.readAsDataURL(t)}}function G(){const s=_({},l.value);s.image_url&&(s.image=s.image_url),delete s.image_url,S.submit({doc:_({doctype:"Item"},s)})}function O(s){confirm("Are you sure you want to delete this item?")&&A.submit({doctype:"Item",name:s})}return B(()=>{b.reload(),V.reload(),C.reload()}),(s,t)=>(u(),n("div",z,[e("div",H,[t[7]||(t[7]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Items",-1)),e("button",{onClick:D,class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded inline-flex items-center"},[I(U(E),{class:"w-4 h-4 mr-2"}),t[6]||(t[6]=L(" Add Item "))])]),e("div",J,[(u(!0),n(v,null,y(a.value,o=>(u(),n("div",{key:o.name,class:"bg-white shadow-md rounded-lg overflow-hidden"},[e("div",K,[e("h2",Q,d(o.item_name),1),e("p",W,"Code: "+d(o.item_code),1)]),e("div",X,[e("img",{src:o.image||"/placeholder.svg?height=200&width=200",alt:o.item_name,class:"w-full h-48 object-contain"},null,8,Y),e("button",{onClick:w=>O(o.name),class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1"},[I(U($),{class:"w-4 h-4"})],8,Z)]),e("div",ee,[e("p",te,d(o.description||"No description available."),1),e("div",oe,[e("span",null,"Group: "+d(o.item_group),1),e("span",null,"UOM: "+d(o.stock_uom),1)])])]))),128))]),f.value?(u(),n("div",se,[e("div",le,[t[17]||(t[17]=e("h2",{class:"text-2xl font-bold mb-4"},"Add New Item",-1)),e("form",{onSubmit:P(G,["prevent"])},[e("div",ae,[t[8]||(t[8]=e("label",{for:"item_code",class:"block text-sm font-medium text-gray-700"},"Item Code",-1)),m(e("input",{type:"text",id:"item_code","onUpdate:modelValue":t[0]||(t[0]=o=>l.value.item_code=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[g,l.value.item_code]])]),e("div",ie,[t[9]||(t[9]=e("label",{for:"item_name",class:"block text-sm font-medium text-gray-700"},"Item Name",-1)),m(e("input",{type:"text",id:"item_name","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.item_name=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[g,l.value.item_name]])]),e("div",re,[t[11]||(t[11]=e("label",{for:"item_group",class:"block text-sm font-medium text-gray-700"},"Item Group",-1)),m(e("select",{id:"item_group","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.item_group=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[10]||(t[10]=e("option",{value:""},"Select an Item Group",-1)),(u(!0),n(v,null,y(i.value,o=>(u(),n("option",{key:o.name,value:o.name},d(o.item_group_name),9,ne))),128))],512),[[N,l.value.item_group]])]),e("div",ue,[t[13]||(t[13]=e("label",{for:"stock_uom",class:"block text-sm font-medium text-gray-700"},"UOM",-1)),m(e("select",{id:"stock_uom","onUpdate:modelValue":t[3]||(t[3]=o=>l.value.stock_uom=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[12]||(t[12]=e("option",{value:"Nos"},"Nos",-1)),(u(!0),n(v,null,y(x.value,o=>(u(),n("option",{key:o.name,value:o.name},d(o.uom_name),9,de))),128))],512),[[N,l.value.stock_uom]])]),e("div",me,[t[14]||(t[14]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[g,l.value.description]])]),e("div",ce,[t[15]||(t[15]=e("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("input",{type:"file",id:"image",onChange:j,accept:"image/*",class:"mt-1 block w-full"},null,32),m(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>l.value.image_url=o),placeholder:"Or enter image URL",class:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[g,l.value.image_url]])]),e("div",{class:"flex justify-end"},[e("button",{type:"button",onClick:M,class:"mr-2 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," Cancel "),t[16]||(t[16]=e("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded"}," Add Item ",-1))])],32)])])):F("",!0)]))}};export{be as default};
