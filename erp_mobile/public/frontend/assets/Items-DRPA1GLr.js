var K=Object.defineProperty;var G=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var L=(g,r,s)=>r in g?K(g,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):g[r]=s,y=(g,r)=>{for(var s in r||(r={}))Q.call(r,s)&&L(g,s,r[s]);if(G)for(var s of G(r))X.call(r,s)&&L(g,s,r[s]);return g};import{c as Y,r as c,m as v,o as Z,f as a,g as e,D as O,k as V,C as q,u as x,F as _,p as k,j as d,A as M,E as m,G as p,H as C,l as i}from"./index-wG4MnxLv.js";import{C as ee,T as te}from"./trash-BOOKFwlR.js";/**
 * @license lucide-vue-next v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=Y("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),se={class:"container mx-auto px-4 py-8 pb-20"},le={class:"flex flex-col space-y-4 mb-6"},ae={class:"flex justify-between items-center"},ie={key:0,class:"space-y-4"},ne=["onClick"],de={class:"flex items-center p-4"},ue={class:"w-16 h-16 flex-shrink-0"},re=["src","alt"],me={class:"ml-4 flex-grow"},ce={class:"text-lg font-semibold text-gray-900"},ge={class:"text-sm text-gray-500"},pe={class:"text-sm text-gray-500"},fe={class:"flex items-center space-x-2"},ve=["onClick"],be={key:1},ye={class:"bg-white rounded-lg shadow-lg overflow-hidden"},xe={class:"md:flex"},_e={class:"md:w-1/2 relative aspect-w-16 aspect-h-9 md:aspect-none md:h-[400px]"},ke=["src","alt"],we={class:"md:w-1/2 p-6 space-y-6"},he={key:0},Ie={class:"text-2xl font-semibold mb-2"},Ce={class:"text-gray-600"},Ue={class:"mt-4"},De={class:"text-gray-600"},Se={class:"grid grid-cols-2 gap-4 mt-6"},Ne={class:"bg-gray-50 p-4 rounded-lg"},Ve={class:"font-medium"},Me={class:"bg-gray-50 p-4 rounded-lg"},Ae={class:"font-medium"},je={class:"bg-gray-50 p-4 rounded-lg"},Ge={class:"font-medium"},Le={class:"bg-gray-50 p-4 rounded-lg"},Oe={class:"font-medium"},qe={class:"mt-6 text-sm text-gray-500"},$e={class:"mt-6 flex justify-end space-x-2"},Ee=["value"],Fe=["value"],Re={class:"mt-1 flex items-center space-x-4"},Be={key:0},Te={class:"flex justify-end space-x-2"},Pe=["disabled"],ze={key:2,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50"},He={class:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full m-4"},We={class:"mb-4"},Je={class:"mb-4"},Ke={class:"mb-4"},Qe=["value"],Xe={class:"mb-4"},Ye=["value"],Ze={class:"mb-4"},et={class:"mb-4"},lt={__name:"Items",setup(g){const r=c([]),s=c(null),U=c([]),D=c([]),u=c({item_code:"",item_name:"",item_group:"",stock_uom:"Nos",description:"",image:null,image_url:""}),w=c(!1),b=c(!1),n=c({}),f=c(null),h=v({url:"frappe.client.get_list",params:{doctype:"Item",fields:["name","item_code","item_name","item_group","stock_uom","description","image","owner","creation","modified"]},auto:!0,onSuccess(l){r.value=l}}),$=v({url:"frappe.client.get_list",params:{doctype:"Item Group",fields:["name","item_group_name"]},auto:!0,onSuccess(l){U.value=l}}),E=v({url:"frappe.client.get_list",params:{doctype:"UOM",fields:["name","uom_name"]},auto:!0,onSuccess(l){D.value=l}}),F=v({url:"frappe.client.insert",onSuccess(){u.value={item_code:"",item_name:"",item_group:"",stock_uom:"Nos",description:"",image:null,image_url:""},w.value=!1,h.reload()}}),S=v({url:"frappe.client.set_value",onSuccess(){b.value=!1,h.reload(),s.value=y({},n.value)}}),R=v({url:"frappe.client.delete",onSuccess(){h.reload(),s.value=null}});function B(){w.value=!0}function T(){w.value=!1}function A(l){const t=l.target.files[0];if(t){f.value=t;const o=new FileReader;o.onload=I=>{b.value?n.value.image=I.target.result:u.value.image=I.target.result},o.readAsDataURL(t)}}function P(){const l=y({},u.value);l.image_url&&(l.image=l.image_url),delete l.image_url,F.submit({doc:y({doctype:"Item"},l)})}function z(l){s.value=l}function H(){let l=n.value.image;if(f.value){const t=new FormData;t.append("file",f.value),t.append("doctype","Item"),t.append("docname",s.value.name),t.append("fieldname","image"),fetch("/api/method/upload_file",{method:"POST",body:t}).then(o=>o.json()).then(o=>{o.message&&o.message.file_url&&(l=o.message.file_url),N(l)}).catch(o=>{console.error("Error uploading image:",o),N(l)})}else N(l)}function N(l){S.submit({doctype:"Item",name:s.value.name,fieldname:{item_name:n.value.item_name,description:n.value.description,item_group:n.value.item_group,stock_uom:n.value.stock_uom,image:l}})}function W(){b.value=!1,n.value=y({},s.value),f.value=null}function J(l){confirm("Are you sure you want to delete this item?")&&R.submit({doctype:"Item",name:l})}function j(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}return Z(()=>{h.reload(),$.reload(),E.reload()}),(l,t)=>(i(),a("div",se,[e("div",le,[e("div",ae,[t[17]||(t[17]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Items",-1)),s.value?(i(),a("button",{key:1,onClick:t[0]||(t[0]=o=>s.value=null),class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg inline-flex items-center"},[V(x(ee),{class:"w-4 h-4 mr-2"}),t[16]||(t[16]=q(" Back to List "))])):(i(),a("button",{key:0,onClick:B,class:"bg-blue-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg inline-flex items-center"},[V(x(oe),{class:"w-4 h-4 mr-2"}),t[15]||(t[15]=q(" Add Item "))]))])]),s.value?(i(),a("div",be,[e("div",ye,[e("div",xe,[e("div",_e,[e("img",{src:s.value.image||"/placeholder.svg?height=400&width=400",alt:s.value.item_name,class:"w-full h-full object-cover"},null,8,ke)]),e("div",we,[b.value?(i(),a("form",{key:1,onSubmit:M(H,["prevent"]),class:"space-y-6"},[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Name",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.value.item_name=o),type:"text",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[p,n.value.item_name]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),m(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>n.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[p,n.value.description]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700"},"Item Group",-1)),m(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>n.value.item_group=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[(i(!0),a(_,null,k(U.value,o=>(i(),a("option",{key:o.name,value:o.name},d(o.item_group_name),9,Ee))),128))],512),[[C,n.value.item_group]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700"},"UOM",-1)),m(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>n.value.stock_uom=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[t[26]||(t[26]=e("option",{value:"Nos"},"Nos",-1)),(i(!0),a(_,null,k(D.value,o=>(i(),a("option",{key:o.name,value:o.name},d(o.uom_name),9,Fe))),128))],512),[[C,n.value.stock_uom]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("div",Re,[e("input",{type:"file",accept:"image/*",onChange:A,class:"hidden",ref:"fileInput"},null,544),e("button",{type:"button",onClick:t[7]||(t[7]=o=>l.$refs.fileInput.click()),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"}," Choose File "),f.value?(i(),a("span",Be,d(f.value.name),1)):O("",!0)]),t[29]||(t[29]=e("p",{class:"mt-2 text-sm text-gray-500"},"Or enter image URL:",-1)),m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>n.value.image=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[p,n.value.image]])]),e("div",Te,[e("button",{type:"button",onClick:W,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-indigo-700",disabled:x(S).loading},d(x(S).loading?"Saving...":"Save Changes"),9,Pe)])],32)):(i(),a("div",he,[e("div",null,[e("h2",Ie,d(s.value.item_name),1),e("p",Ce,"Code: "+d(s.value.item_code),1)]),e("div",Ue,[t[18]||(t[18]=e("h3",{class:"text-lg font-semibold mb-2"},"Description",-1)),e("p",De,d(s.value.description||"No description available."),1)]),e("div",Se,[e("div",Ne,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-500"},"Item Group",-1)),e("p",Ve,d(s.value.item_group),1)]),e("div",Me,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-500"},"UOM",-1)),e("p",Ae,d(s.value.stock_uom),1)]),e("div",je,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-500"},"Created By",-1)),e("p",Ge,d(s.value.owner),1)]),e("div",Le,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-500"},"Last Modified",-1)),e("p",Oe,d(j(s.value.modified)),1)])]),e("div",qe,[e("p",null,"Created: "+d(j(s.value.creation)),1)]),e("div",$e,[e("button",{onClick:t[1]||(t[1]=o=>b.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Edit "),e("button",{onClick:t[2]||(t[2]=o=>J(s.value.name)),class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Delete ")])]))])])])])):(i(),a("div",ie,[(i(!0),a(_,null,k(r.value,o=>(i(),a("div",{key:o.name,onClick:I=>z(o),class:"block bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow cursor-pointer"},[e("div",de,[e("div",ue,[e("img",{src:o.image||"/placeholder.svg?height=100&width=100",alt:o.item_name,class:"w-full h-full object-cover rounded-lg"},null,8,re)]),e("div",me,[e("h2",ce,d(o.item_name),1),e("p",ge,"Code: "+d(o.item_code||"N/A"),1),e("p",pe,"Group: "+d(o.item_group),1)]),e("div",fe,[e("button",{onClick:M(I=>l.deleteItem(o.name),["stop"]),class:"p-2 text-gray-400 hover:text-red-600 rounded-full hover:bg-red-50"},[V(x(te),{class:"w-5 h-5"})],8,ve)])])],8,ne))),128))])),w.value?(i(),a("div",ze,[e("div",He,[t[39]||(t[39]=e("h2",{class:"text-2xl font-bold mb-4"},"Add New Item",-1)),e("form",{onSubmit:M(P,["prevent"])},[e("div",We,[t[30]||(t[30]=e("label",{for:"item_code",class:"block text-sm font-medium text-gray-700"},"Item Code",-1)),m(e("input",{type:"text",id:"item_code","onUpdate:modelValue":t[9]||(t[9]=o=>u.value.item_code=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[p,u.value.item_code]])]),e("div",Je,[t[31]||(t[31]=e("label",{for:"item_name",class:"block text-sm font-medium text-gray-700"},"Item Name",-1)),m(e("input",{type:"text",id:"item_name","onUpdate:modelValue":t[10]||(t[10]=o=>u.value.item_name=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[p,u.value.item_name]])]),e("div",Ke,[t[33]||(t[33]=e("label",{for:"item_group",class:"block text-sm font-medium text-gray-700"},"Item Group",-1)),m(e("select",{id:"item_group","onUpdate:modelValue":t[11]||(t[11]=o=>u.value.item_group=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[32]||(t[32]=e("option",{value:""},"Select an Item Group",-1)),(i(!0),a(_,null,k(U.value,o=>(i(),a("option",{key:o.name,value:o.name},d(o.item_group_name),9,Qe))),128))],512),[[C,u.value.item_group]])]),e("div",Xe,[t[35]||(t[35]=e("label",{for:"stock_uom",class:"block text-sm font-medium text-gray-700"},"UOM",-1)),m(e("select",{id:"stock_uom","onUpdate:modelValue":t[12]||(t[12]=o=>u.value.stock_uom=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[34]||(t[34]=e("option",{value:"Nos"},"Nos",-1)),(i(!0),a(_,null,k(D.value,o=>(i(),a("option",{key:o.name,value:o.name},d(o.uom_name),9,Ye))),128))],512),[[C,u.value.stock_uom]])]),e("div",Ze,[t[36]||(t[36]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),m(e("textarea",{id:"description","onUpdate:modelValue":t[13]||(t[13]=o=>u.value.description=o),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[p,u.value.description]])]),e("div",et,[t[37]||(t[37]=e("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image",-1)),e("input",{type:"file",id:"image",onChange:A,accept:"image/*",class:"mt-1 block w-full"},null,32),m(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=o=>u.value.image_url=o),placeholder:"Or enter image URL",class:"mt-2 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[p,u.value.image_url]])]),e("div",{class:"flex justify-end space-x-2 mt-6"},[e("button",{type:"button",onClick:T,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"}," Cancel "),t[38]||(t[38]=e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"}," Add Item ",-1))])],32)])])):O("",!0)]))}};export{lt as default};
